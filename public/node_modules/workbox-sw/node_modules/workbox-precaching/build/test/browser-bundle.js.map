{"version":3,"file":"browser-bundle.js","sources":["../../src/lib/constants.js","../../test/browser/cache-testing.js","../../test/browser/library-namespace.js"],"sourcesContent":["/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nexport const cacheBustParamName = '_workbox-precaching';\nexport const version = 'v1';\nexport const dbName = 'workbox-precaching';\nexport const dbVersion = '1';\nexport const dbStorename = 'asset-revisions';\n\nlet tmpRevisionedCacheName = `workbox-precaching-revisioned-${version}`;\nif (self && self.registration) {\n  tmpRevisionedCacheName += `-${self.registration.scope}`;\n}\nexport const defaultRevisionedCacheName = tmpRevisionedCacheName;\n","/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/* eslint-env mocha, browser */\n\nimport {dbName} from '../../src/lib/constants.js';\n\ndescribe(`workbox-precaching Test Revisioned Caching`, function() {\n  const STATIC_ASSETS_PATH = '/packages/workbox-precaching/test/static';\n\n  const deleteIndexedDB = () => {\n    return new Promise((resolve, reject) => {\n      const req = indexedDB.deleteDatabase(dbName);\n      req.onsuccess = () => resolve();\n      req.onerror = () => reject();\n      req.onblocked = () => {\n        console.error('Database deletion is blocked.');\n        reject();\n      };\n    });\n  };\n\n  beforeEach(function() {\n    return window.goog.swUtils.cleanState()\n    .then(deleteIndexedDB);\n  });\n\n  afterEach(function() {\n    return window.goog.swUtils.cleanState()\n    .then(deleteIndexedDB);\n  });\n\n  const testCacheEntries = (fileSet) => {\n    return window.caches.keys()\n    .then((cacheNames) => {\n      cacheNames.length.should.equal(1);\n      return window.caches.open(cacheNames[0]);\n    })\n    .then((cache) => cache.keys())\n    .then((cachedResponses) => {\n      cachedResponses.length.should.equal(fileSet.length);\n\n      fileSet.forEach((assetAndHash) => {\n        let matchingResponse = null;\n        cachedResponses.forEach((cachedResponse) => {\n          let desiredPath = assetAndHash;\n          if (typeof assetAndHash !== 'string') {\n            desiredPath = assetAndHash.url;\n          }\n\n          if (cachedResponse.url.indexOf(desiredPath) !== -1) {\n            matchingResponse = cachedResponse;\n            return;\n          }\n        });\n\n        expect(matchingResponse).to.exist;\n      });\n    });\n  };\n\n  const testFileSet = (iframe, swPath, fileSet) => {\n    return testCacheEntries(fileSet)\n    .then(() => {\n      let responses = {};\n      const promises = fileSet.map((assetAndHash) => {\n        let url = assetAndHash;\n        if (typeof assetAndHash === 'object') {\n          url = assetAndHash.url;\n        }\n\n        // This handles relative URL's that will be relative to the service\n        // worker's path.\n        const parsedURL = new URL(\n          url,\n          new URL(swPath, location).toString()\n        ).toString();\n        return iframe.contentWindow.fetch(new URL(parsedURL))\n        .then((cachedResponse) => {\n          if (cachedResponse.type === 'opaque') {\n            responses[url] = null;\n          } else {\n            return cachedResponse.text()\n            .then((bodyText) => {\n              responses[url] = bodyText;\n            });\n          }\n        });\n      });\n      return Promise.all(promises)\n      .then(() => {\n        return responses;\n      });\n    });\n  };\n\n  const compareRevisionedCachedAssets = (beforeData, afterData) => {\n    afterData.cacheList.forEach((afterAssetAndHash) => {\n      if (typeof afterAssetAndHash === 'string') {\n        afterAssetAndHash = {url: afterAssetAndHash, revision: afterAssetAndHash};\n      }\n\n      let matchingBeforeAssetAndHash = null;\n      beforeData.cacheList.forEach((beforeAssetAndHash) => {\n        if (typeof beforeAssetAndHash === 'string') {\n          beforeAssetAndHash = {url: beforeAssetAndHash, revision: beforeAssetAndHash};\n        }\n\n        if (beforeAssetAndHash.url === afterAssetAndHash.url) {\n          matchingBeforeAssetAndHash = beforeAssetAndHash;\n        }\n      });\n\n      if (!matchingBeforeAssetAndHash) {\n        return;\n      }\n\n      const beforeResponseBody = beforeData.cachedResponses[afterAssetAndHash.url];\n      const afterResponseBody = afterData.cachedResponses[afterAssetAndHash.url];\n\n      if (matchingBeforeAssetAndHash.revision === afterAssetAndHash.revision) {\n        // The request should be the same\n        beforeResponseBody.should.equal(afterResponseBody);\n      } else {\n        // The request should be different\n        beforeResponseBody.should.not.equal(afterResponseBody);\n      }\n    });\n  };\n\n  it(`should cache and fetch revisioned urls`, function() {\n    const sw1 = `${STATIC_ASSETS_PATH}/basic-cache/basic-revisioned-cache-sw.js`;\n    const sw2 = `${STATIC_ASSETS_PATH}/basic-cache/basic-revisioned-cache-sw-2.js`;\n\n    return window.goog.swUtils.activateSW(sw1)\n    .then((iframe) => {\n      return testFileSet(iframe, sw1, workbox.__TEST_DATA['set-1']['step-1']);\n    })\n    .then((step1Responses) => {\n      return window.goog.swUtils.activateSW(sw2)\n      .then((iframe) => {\n        return testFileSet(iframe, sw2, workbox.__TEST_DATA['set-1']['step-2']);\n      })\n      .then((step2Responses) => {\n        compareRevisionedCachedAssets({\n          cacheList: workbox.__TEST_DATA['set-1']['step-1'],\n          cachedResponses: step1Responses,\n        }, {\n          cacheList: workbox.__TEST_DATA['set-1']['step-2'],\n          cachedResponses: step2Responses,\n        });\n      });\n    });\n  });\n\n  it.skip(`should cache and fetch unrevisioned urls`, function() {\n    const sw1 = `${STATIC_ASSETS_PATH}/basic-cache/basic-unrevisioned-cache-sw.js`;\n    const sw2 = `${STATIC_ASSETS_PATH}/basic-cache/basic-unrevisioned-cache-sw-2.js`;\n    return window.goog.swUtils.activateSW(sw1)\n    .then((iframe) => {\n      return testFileSet(iframe, sw1, workbox.__TEST_DATA['set-2']['step-1']);\n    })\n    .then((step1Responses) => {\n      return window.goog.swUtils.activateSW(sw2)\n      .then((iframe) => {\n        return testFileSet(iframe, sw2, workbox.__TEST_DATA['set-2']['step-2']);\n      });\n    });\n  });\n\n  it(`should manage revisioned cache deletion`, function() {\n    const sw1 = `${STATIC_ASSETS_PATH}/basic-cache/basic-revisioned-cache-sw.js`;\n    const sw2 = `${STATIC_ASSETS_PATH}/basic-cache/basic-revisioned-cache-sw-2.js`;\n    return window.goog.swUtils.activateSW(sw1)\n    .then((iframe) => {\n      return testFileSet(iframe, sw1, workbox.__TEST_DATA['set-1']['step-1']);\n    })\n    .then((step1Responses) => {\n      return window.goog.swUtils.clearAllCaches()\n      .then(() => {\n        return window.goog.swUtils.activateSW(sw2);\n      })\n      .then((iframe) => {\n        return testFileSet(iframe, sw2, workbox.__TEST_DATA['set-1']['step-2']);\n      });\n    });\n  });\n\n  it.skip(`should manage unrevisioned cache deletion`, function() {\n    const sw1 = `${STATIC_ASSETS_PATH}/basic-cache/basic-unrevisioned-cache-sw.js`;\n    const sw2 = `${STATIC_ASSETS_PATH}/basic-cache/basic-unrevisioned-cache-sw-2.js`;\n    return window.goog.swUtils.activateSW(sw1)\n    .then((iframe) => {\n      return testFileSet(iframe, sw1, workbox.__TEST_DATA['set-2']['step-1']);\n    })\n    .then((step1Responses) => {\n      return window.goog.swUtils.clearAllCaches()\n      .then(() => {\n        return window.goog.swUtils.activateSW(sw2);\n      })\n      .then((iframe) => {\n        return testFileSet(iframe, sw2, workbox.__TEST_DATA['set-2']['step-2']);\n      });\n    });\n  });\n\n  it(`should manage revisioned indexedDB deletion`, function() {\n    const sw1 = `${STATIC_ASSETS_PATH}/basic-cache/basic-revisioned-cache-sw.js`;\n    const sw2 = `${STATIC_ASSETS_PATH}/basic-cache/basic-revisioned-cache-sw-2.js`;\n    return window.goog.swUtils.activateSW(sw1)\n    .then((iframe) => {\n      return testFileSet(iframe, sw1, workbox.__TEST_DATA['set-1']['step-1']);\n    })\n    .then((step1Responses) => {\n      return deleteIndexedDB()\n      .then(() => {\n        return window.goog.swUtils.activateSW(sw2);\n      })\n      .then((iframe) => {\n        return testFileSet(iframe, sw2, workbox.__TEST_DATA['set-1']['step-2']);\n      });\n    });\n  });\n\n  it(`should only request revisioned duplicate entries once`, function() {\n    let allEntries = [];\n    workbox.__TEST_DATA['duplicate-entries'].forEach((entries) => {\n      allEntries = allEntries.concat(entries);\n    });\n    allEntries = [...new Set(allEntries)];\n\n    const swPath = `${STATIC_ASSETS_PATH}/duplicate-entries/duplicate-entries-revisioned-sw.js`;\n    return window.goog.swUtils.activateSW(swPath)\n    .then((iframe) => {\n      return iframe.contentWindow.fetch('/__api/get-requests-made/')\n      .then((response) => {\n        return response.json();\n      })\n      .then((requestsMade) => {\n        if (allEntries.length !== requestsMade.length) {\n          throw new Error('Requests made does not equal the list of de-duped cache entries. Requests Made are: ' + JSON.stringify(requestsMade));\n        }\n      })\n      .then(() => {\n        return iframe;\n      });\n    })\n    .then((iframe) => {\n      return testFileSet(iframe, swPath, allEntries);\n    });\n  });\n\n  it.skip(`should only request unrevisioned duplicate entries once`, function() {\n    let allEntries = [];\n    workbox.__TEST_DATA['duplicate-entries'].forEach((entries) => {\n      allEntries = allEntries.concat(entries);\n    });\n    allEntries = [...new Set(allEntries)];\n\n    const swPath = `${STATIC_ASSETS_PATH}/duplicate-entries/duplicate-entries-unrevisioned-sw.js`;\n    return window.goog.swUtils.activateSW(swPath)\n    .then((iframe) => {\n      return iframe.contentWindow.fetch('/__api/get-requests-made/')\n      .then((response) => {\n        return response.json();\n      })\n      .then((requestsMade) => {\n        if (allEntries.length !== requestsMade.length) {\n          throw new Error('Duplicate requests have been made: ' + JSON.stringify(requestsMade));\n        }\n      })\n      .then(() => {\n        return iframe;\n      });\n    })\n    .then((iframe) => {\n      return testFileSet(iframe, swPath, allEntries);\n    });\n  });\n\n  it(`should manage redirected revisioned requests`, function() {\n    return window.goog.swUtils.activateSW(`${STATIC_ASSETS_PATH}/response-types/redirect-revisioned-sw.js`)\n    .then((iframe) => {\n      const promises = workbox.__TEST_DATA['redirect'].map((redirectPath) => {\n        const sections = redirectPath.split('/').filter((section) => {\n          return section !== '';\n        });\n        const expectedResponse = sections[sections.length - 1];\n        return iframe.contentWindow.fetch(redirectPath)\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error('Response NOT ok.');\n          }\n          return response.text();\n        })\n        .then((responseText) => {\n          if (responseText !== expectedResponse) {\n            throw new Error('Unexpected response: ' + redirectPath);\n          }\n        });\n      });\n      return Promise.all(promises);\n    });\n  });\n\n  it.skip(`should manage redirected unrevisioned requests`, function() {\n    return window.goog.swUtils.activateSW(`${STATIC_ASSETS_PATH}/response-types/redirect-unrevisioned-sw.js`)\n    .then((iframe) => {\n      const promises = workbox.__TEST_DATA['redirect'].map((redirectPath) => {\n        const sections = redirectPath.split('/').filter((section) => {\n          return section !== '';\n        });\n        const expectedResponse = sections[sections.length - 1];\n        return iframe.contentWindow.fetch(redirectPath)\n        .then((response) => {\n          if (!response.ok) {\n            throw new Error('Response NOT ok.');\n          }\n          return response.text();\n        })\n        .then((responseText) => {\n          if (responseText !== expectedResponse) {\n            throw new Error('Unexpected response: ' + redirectPath);\n          }\n        });\n      });\n      return Promise.all(promises);\n    });\n  });\n});\n","/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\ndescribe(`Test Behaviors of Loading the Script`, function() {\n  this.timeout(60 * 1000);\n\n  it(`should print an error when added to the window.`, function() {\n    this.timeout(2000);\n\n    return new Promise((resolve, reject) => {\n      window.onerror = (msg, url, lineNo, columnNo, error) => {\n        window.onerror = null;\n\n        if (error.name === 'not-in-sw') {\n          resolve();\n          return true;\n        } else {\n          reject('Unexpected error received.');\n          return false;\n        }\n      };\n\n      const scriptElement = document.createElement('script');\n      scriptElement.src = '/__test/bundle/workbox-precaching';\n      scriptElement.addEventListener('error', (event) => {\n        reject();\n      });\n      document.head.appendChild(scriptElement);\n    });\n  });\n});\n"],"names":[],"mappings":"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"}